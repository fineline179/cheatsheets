%% Python cheat sheet
%% (compile with XeTeX. see notes in structure_cheatSheet.tex if no XeTeX.)

\documentclass[11pt]{article}
\synctex=1
\input{structure_cheatSheet.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{Python Cheatsheet}
\author{Steve Young}
\abstract{Everything I know about Python.}

\begin{document}
\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\TODO{make sidebar marker telling what python library command depends on (and
needs to be loaded beforehand)}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Python}

\subsection{Lists and Dicts}

\subsubsection{Lists}
With list name \ttt{foo}:
\begin{description}
  \setlength\itemsep{1pt}
  \item[Init list of length <n> with <constant>:] \ttt{foo = [<constant>] * <n>} 
  \item[Add <val> to end of list:] \ttt{foo.append(<val>)}
  \item[Remove list item at pos <n> (or end if <n> unspecified):] \ttt{foo.pop(<n>)}
  \item[Insert <val> into list before position <n>:] \ttt{foo.insert(<n>, <val>)}
  \item[Sum of list:] \ttt{sum(foo)}
  \item[Get indexed elements as tuples (index, el) from list or NDArray:]
  \ttt{enumerate(list)} 
\end{description}

\subsubsection{Dicts}
Dictionaries are key-value stores, \eie hashtables. With dictionary name \ttt{foo}:
\begin{description}
  \setlength\itemsep{1pt}
  \item[Add <key>-<value> pair:] \ttt{foo[<key>] = <value>} 
  \item[Iterate though <key>-<value> pairs:] \ttt{for (key, value) in foo.items()}
  \item[Test if <key> in dict:] \ttt{<key> in foo}
\end{description}

\subsection{Sorting}
With sortable-thing name \ttt{foo}:
\begin{description}
  \setlength\itemsep{1pt}
  \item[Sort (modify in place):] \ttt{foo.sort()}
  \item[Sort (make a copy):] \ttt{foo.sorted()}
  \item[Specify field to sort by (here by 2nd element of tuple):]
  \ttt{foo.sorted(key=lambda x: x[1])}
  \item[Sort in reverse order:] \ttt{foo.sorted(reverse=True)}
\end{description}

\subsection{Data Processing}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Read data from json file:] \ttt{with open('data.json', 'r') as f: data =
    json.load(f) }
  \item[Write data to json file:] \ttt{with open('data.json', 'w') as f: data =
    json.dump(f) }
  \item[Regex processing of text, \ttt{re} package:] look at
  \href{https://docs.python.org/3/library/re.html}
  {https://docs.python.org/3/library/re.html}
\end{description}

\subsection{Misc}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Return integer representing Unicode <char>:] \ttt{ord(<char>)} 
\end{description}

\subsection{re}
\begin{description}
  \setlength\itemsep{1pt}
  \item{}
\end{description}


\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Numpy}
Using \ttt{import numpy as np}:

\subsection{Data Processing}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Import data from csv file:] \ttt{np.genfromtxt('filename', delimiter=',')}
\end{description}

\subsection{Number generation}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Constant matrix of <val>:] \ttt{np.full(shape, <val>)}
  \item[Matrix of ones/zeros:] \ttt{np.ones(shape)}, \quad \ttt{np.zeros(shape)}
  \item[Id matrix:] \ttt{np.eye(dim)}
  \item[Uniform dist on (low,high):] \ttt{np.random.uniform(low, high, numsamps or
    shape)}
  \item[Uniform dist on (0,1) with given dims:] \ttt{np.random.rand(d1, d2, ..)}
  \item[Normal dist:] \ttt{np.random.normal(mean, stddev, numsamps)}
  \item[Normal dist on with given dims:] \ttt{np.random.randn(d1, d2, ..)}
  \item[Multivariate normal:] \ttt{np.random.multivariate\_normal(..args)}
  \item[Random permutation of elements in ndarray:] \ttt{np.random.permutation(NDArray)}
  \item[Permute elements of (range or ndarray) \emph{in place}:]
  \ttt{np.random.shuffle(int or NDArray)}
  \item[Integers over specified range:] \ttt{np.arange(start, stop)}
  \item[Evenly spaced numbers over range w/ int \ttt{stepsize}:] \ttt{np.arange(beg,
    end, stepsize)}
  \item[\ttt{numvals} Evenly spaced numbers over range:] \ttt{np.linspace(bed, end,
    numvals)}

\end{description}

\subsection{NDArray handling}
\begin{itemize}
  \setlength\itemsep{1pt}
  \item NDArrays are naturally \emph{row vectors}, and of shape $(m,)$.
\end{itemize}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Reshape array:] \ttt{np.reshape(NDArray, tuple of shape)}
\end{description}

\subsection{NDArray ops}
\begin{description}
  \setlength\itemsep{1pt}
  \item[max/min element of array:] \ttt{np.max(NDArray)},\quad \ttt{np.min(NDArray)}
  \item[index of max/min element of array:] \ttt{np.argmax(NDArray)},\quad
  \ttt{np.argmin(NDArray)}
  \item[fill diagonal of sq matrix:] \ttt{np.fill\_diagonal(NDArray, val)}
  \item[round elements to nearest int:] \ttt{np.rint(NDArray)}
  \item[return bin counts in histogram:] \ttt{np.histogram(NDArray, binboundaries)}
  \item[<n>th difference of array:]\footnote{Think transforming array of tick prices
    into array of tick prices \emph{changes}} \ttt{np.diff(NDArray, <n>)}
\end{description}

\subsection{Linear Algebra}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Inverse matrix:] \ttt{np.linalg.inv(square NDArray)}
  \item[Transpose matrix:] \ttt{np.linalg.transpose(NDArray)}
  \item[evals and right evects:] \ttt{np.linalg.eig(square NDArray)}
\end{description}


\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Matplotlib}
Using \ttt{import matplotlib as mpl}, \ \ttt{import matplotlib.pyplot as plt}:

\begin{description}
  \setlength\itemsep{1pt}
  \item[show image (if not in inline mode):] \ttt{plt.show()}
  \item[plot image:] \ttt{plt.imshow(NDArray)}
  \item[set axis bounds:] \ttt{plt.axis([xmin, xmax, ymin, ymax])}
  \item[set x,y axis label:] \ttt{plt.xlabel(name)}, \quad \ttt{plt.ylabel(name)}
  \item[set plot title:] \ttt{plt.title(name)}
  \item[show plot legend:] \ttt{plt.legend()}
  \item[visualize matrix vals as heat map:] \ttt{plt.matshow(NDArray)}
  \item[pan/zoomable plots in PyCharm:] insert \ttt{mpl.use('Qt5agg')} before
  \ttt{import matplotlib.pyplot as plt}
\end{description}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Pandas}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Scikit-learn}

\begin{description}
  \setlength\itemsep{1pt}
  \item[Cross Validation:] \ttt{sklearn.model\_selection.cross\_val\_score}
\end{description}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{packages to try}

\begin{description}
  \setlength\itemsep{1pt}
  \item[text from PDFs:] \ttt{PyPDF2}
\end{description}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-engine: xetex
%%% End:
