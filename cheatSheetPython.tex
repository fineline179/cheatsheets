%% Python cheat sheet
%% (compile with XeTeX. see notes in structure_cheatSheet.tex if no XeTeX.)

\documentclass[10pt]{article}
\synctex=1
\input{structure_cheatSheet.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{Python Cheatsheet}
\author{Steve Young}
\abstract{Everything I know about Python.}

\begin{document}
\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\TODO{make sidebar marker telling what python library command depends on (and
needs to be loaded beforehand)}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Python}

\subsection{Lists and Dicts}

\subsubsection{Lists}
! With list name \ttt{foo}:

\begin{description}
  \setlength\itemsep{1pt}
  \item[Init list of length <n> with <constant>:] \ttt{foo = [<constant>] * <n>} 
  \item[Add <val> to end of list:] \ttt{foo.append(<val>)}
  \item[Remove list item at pos <n> (or end if <n> unspecified):] \ttt{foo.pop(<n>)}
  \item[Insert <val> into list before position <n>:] \ttt{foo.insert(<n>, <val>)}
  \item[Sum of list:] \ttt{sum(foo)}
  \item[Get indexed elements as tuples (index, el) from list or NDArray:]
  \ttt{enumerate(list)} 
\end{description}

\subsubsection{Dicts}
! Dictionaries are key-value stores, \eie hashtables. With dictionary name \ttt{foo}:

\begin{description}
  \setlength\itemsep{1pt}
  \item[Add <key>-<value> pair:] \ttt{foo[<key>] = <value>} 
  \item[Iterate though <key>-<value> pairs:] \ttt{for (key, value) in foo.items()}
  \item[Test if <key> in dict:] \ttt{<key> in foo}
\end{description}

\subsection{Sorting}
! With sortable-thing name \ttt{foo}:

\begin{description}
  \setlength\itemsep{1pt}
  \item[Sort (modify in place):] \ttt{foo.sort()}
  \item[Sort (make a copy):] \ttt{foo.sorted()}
  \item[Specify field to sort by (here by 2nd element of tuple):]
  \ttt{foo.sorted(key=lambda x: x[1])}
  \item[Sort in reverse order:] \ttt{foo.sorted(reverse=True)}
\end{description}

\subsection{Data Processing}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Read data from json file:] \ttt{with open('data.json','r') as f: data =
    json.load(f) }
  \item[Write data to json file:] \ttt{with open('data.json','w') as f: data =
    json.dump(f) }
  \item[Regex processing of text, \ttt{re} package:] look at
  \href{https://docs.python.org/3/library/re.html}
  {https://docs.python.org/3/library/re.html}
\end{description}

\subsection{Misc}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Return integer representing Unicode <char>:] \ttt{ord(<char>)} 
\end{description}

\subsection{Regex (re)}
%% For items that have multiple lines of code after the description, instead of using a
%% \description env on the outside of all items, use a \paragraph for each item,
%% followed by a \description env hack for the lines of code. Alternatively use a
%% \textbf instead of a \paragraph to reduce spacing between items.
%%
%% the \description env hack for a multi-line code listing has less spacing between
%% lines than is standard for a list env (as \description env is a list env). So eg use
%% a '\setlength\itemsep{-5pt}' inside the \description env.

\paragraph{List all files in dir that match some regular expression:}
\begin{description}
  \setlength\itemsep{-5pt} 
  \item \ttt{regex = re.compile(<regex string>)}
  \item \ttt{filepaths = [f for f in os.listdir(<dir>) if re.match(regex, f)]}
\end{description}


\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Numpy}
! Using \ttt{import numpy as np}:

\subsection{Data Processing}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Import data from csv file:] \ttt{np.genfromtxt('filename', delimiter=',')}
\end{description}

\subsection{Number generation}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Constant matrix of <val>:] \ttt{np.full(shape, <val>)}
  \item[Matrix of ones/zeros:] \ttt{np.ones(shape)}, \quad \ttt{np.zeros(shape)}
  \item[Id matrix:] \ttt{np.eye(dim)}
  \item[Uniform dist on (low,high):] \ttt{np.random.uniform(low, high, numsamps or
    shape)}
  \item[Uniform dist on (0,1) with given dims:] \ttt{np.random.rand(d1, d2, ..)}
  \item[Normal dist:] \ttt{np.random.normal(mean, stddev, numsamps)}
  \item[Normal dist on with given dims:] \ttt{np.random.randn(d1, d2, ..)}
  \item[Multivariate normal:] \ttt{np.random.multivariate\_normal(..args)}
  \item[Random permutation of elements in ndarray:] \ttt{np.random.permutation(NDArray)}
  \item[Permute elements of (range or ndarray) \emph{in place}:]
  \ttt{np.random.shuffle(int or NDArray)}
  \item[Integers over specified range:] \ttt{np.arange(beg, end)}
  \item[Evenly spaced numbers over range w/ interval \ttt{stepsize}:]
  \ttt{np.arange(beg, end, stepsize)}
  \item[\ttt{numvals} Evenly spaced numbers over range:] \ttt{np.linspace(bed, end,
    numvals)}
\end{description}

\subsection{NDArray handling}
! NDArrays are naturally \emph{row vectors}, and of shape $(m,)$.

\begin{description}
  \setlength\itemsep{1pt}
  \item[Reshape array:] \ttt{np.reshape(NDArray, tuple of shape)}
\end{description}

\subsection{NDArray ops}
\begin{description}
  \setlength\itemsep{1pt}
  \item[max/min element of array:] \ttt{np.max(NDArray)},\quad \ttt{np.min(NDArray)}
  \item[Index of max/min element of array:] \ttt{np.argmax(NDArray)},\quad
  \ttt{np.argmin(NDArray)}
  \item[Fill diagonal of sq matrix:] \ttt{np.fill\_diagonal(NDArray, val)}
  \item[Make diag matrix w/ <vec> as diagonal:] \ttt{np.diag(<vec>)}
  \item[Round elements to nearest int:] \ttt{np.rint(NDArray)}
  \item[Return bin counts in histogram:] \ttt{np.histogram(NDArray, binboundaries)}
  \item[<n>th difference of array:]\footnote{Think transforming array of tick prices
    into array of tick prices \emph{changes}} \ttt{np.diff(NDArray, <n>)}
\end{description}

\subsection{Linear Algebra}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Inverse matrix:] \ttt{np.linalg.inv(square NDArray)}
  \item[Transpose matrix:] \ttt{np.linalg.transpose(NDArray)}
  \item[Eigenvalues and right eigenvectors:] \ttt{np.linalg.eig(square NDArray)}
\end{description}


\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Matplotlib}
! Using \ttt{import matplotlib as mpl}, \ \ttt{import matplotlib.pyplot as plt}:

\subsection{MATLAB interface}
\begin{description}
  \setlength\itemsep{1pt}
  \item[Show image (if not in inline mode):] \ttt{plt.show()}
  \item[Plot image:] \ttt{plt.imshow(NDArray)}
  \item[Set axis bounds:] \ttt{plt.axis([xmin, xmax, ymin, ymax])}
  \item[Set x,y axis label:] \ttt{plt.xlabel(name)}, \quad \ttt{plt.ylabel(name)}
  \item[Set plot title:] \ttt{plt.title(name)}
  \item[Show plot legend:] \ttt{plt.legend()}
  \item[Visualize matrix vals as heat map:] \ttt{plt.matshow(NDArray)}
  \item[Pan/zoomable plots in PyCharm:] insert \ttt{mpl.use('Qt5agg')} before
  \ttt{import matplotlib.pyplot as plt}
\end{description}

\subsection{Object-oriented interface}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Pandas}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Scikit-learn}

\begin{description}
  \setlength\itemsep{1pt}
  \item[Cross Validation:] \ttt{sklearn.model\_selection.cross\_val\_score}
\end{description}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-engine: xetex
%%% End:
